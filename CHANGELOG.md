# 更新日誌 (Changelog)

所有重要的專案變更都會記錄在此檔案中。

格式基於 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/)，
版本號遵循 [Semantic Versioning](https://semver.org/lang/zh-TW/)。

---

## [1.1.0] - 2025-12-27

### 🎉 新增功能

#### 🌍 完整國際化支援
- **5 種語言支援**：英文、繁體中文、日文、法文、西班牙文
- **自動語言偵測**：根據瀏覽器語言自動顯示對應介面
- **手動語言切換**：在規則管理頁面新增語言選擇器
- **即時更新**：切換語言後立即生效，無需重新載入頁面
- **全域同步**：所有頁面都使用相同語言（popup、規則管理、右鍵選單、通知）
- **持久保存**：語言設定永久記憶

#### 🎨 語言選擇器
- 在規則管理頁面底部新增「🌐 語言設定」區塊
- 下拉選單支援 5 種語言選擇
- 簡潔清晰的介面設計

#### 📱 右鍵選單動態更新
- 右鍵選單文字自動跟隨選擇的語言
- 監聽語言變更並即時更新
- 無需重新開啟瀏覽器

#### 🛡️ 重複規則檢查
- 右鍵新增規則時檢查是否已存在
- 如果規則已存在，顯示「規則已存在」通知
- **不會覆蓋現有規則**，保護使用者設定
- 提示訊息支援多語言

### 🔧 技術改進

#### 動態 i18n 系統
- 實作全新的動態語言載入系統
- 使用 `fetch()` API 載入翻譯檔案
- 快取機制提升效能
- 支援運行時語言切換

#### 通知訊息國際化
- 所有通知訊息支援多語言
- 使用參數化格式 (`$1`, `$2`)
- 時間格式根據語言自動調整：
  - 中文/日文：`10分30秒`
  - 法文：`10 min 30 sec`
  - 西班牙文：`10 min 30 seg`
  - 英文：`10 minutes 30 sec`

#### 語言管理
- 新增 `updateContextMenu()` 函式
- 新增 `storage.onChanged` 監聽器
- 完善的錯誤處理和後備機制

### 📊 翻譯統計
- **翻譯鍵值**：56 個/語言
- **總翻譯數**：280 個鍵值
- **覆蓋範圍**：100% 所有界面文字

### 📝 文件
- 新增 `docs/I18N_README.md` - 國際化總覽
- 新增 `docs/I18N_SUMMARY.md` - 實作總結
- 新增 `docs/LANGUAGE_FIX.md` - 語言切換修正說明
- 新增 `docs/LANGUAGE_SWITCHING_GUIDE.md` - 使用者指南
- 新增 `docs/CONTEXT_MENU_I18N.md` - 右鍵選單國際化
- 新增 `docs/CONTEXT_MENU_DYNAMIC_UPDATE.md` - 動態更新說明
- 新增 `docs/FINAL_I18N_SUMMARY.md` - 最終總結
- 新增 `docs/RELEASE_NOTES_1.1.0.md` - 版本更新說明

### 🐛 修正
- 修正語言切換無法生效的問題
- 修正右鍵選單語言不同步的問題
- 修正重複新增規則會覆蓋現有規則的問題

### 📦 新增檔案
```
_locales/
  ├── en/messages.json          (56 keys)
  ├── zh_TW/messages.json       (56 keys)
  ├── ja/messages.json          (56 keys)
  ├── fr/messages.json          (56 keys)
  └── es/messages.json          (56 keys)
i18n.js                         (動態 i18n 系統)
```

### 🔄 修改檔案
- `manifest.json` - 版本更新 + i18n 設定
- `background.js` - 右鍵選單國際化 + 重複檢查
- `popup.html` - 新增 i18n 屬性
- `popup.js` - 使用動態 i18n API
- `site-rules.html` - 新增語言選擇器
- `site-rules.js` - 語言切換邏輯

---

## [1.0.0] - 2025-12-26

### 🎉 首次正式發布

這是倒數計時 Chrome 擴充功能的第一個正式版本，包含完整的計時器功能和進階管理工具。

### ✨ 新增功能

#### 核心計時功能
- 自訂倒數計時器（分鐘和秒數設定）
- 三色燈號系統（綠燈、黃燈、紅燈）
- 可自訂綠燈和紅燈的時間門檻
- 在擴充功能圖示上顯示剩餘分鐘數（Badge）
- 網頁上即時顯示倒數時間和燈號
- 記憶上次設定的倒數時間

#### 網站規則管理
- 網站自動計時規則系統
- 支援萬用字元（`*`）匹配網址
- 規則 CRUD 完整功能：
  - 新增規則
  - 編輯規則
  - 刪除規則
  - 查看規則列表
- 每個網站可獨立設定倒數時間和燈號門檻
- 可選擇顯示時間或僅顯示訊號燈

#### 快速操作
- 右鍵選單快速新增網站規則
- 自動擷取當前網站網址
- 新增成功顯示系統通知

#### 設定管理
- 匯出所有設定為 JSON 檔案
- 從 JSON 檔案匯入設定
- 支援備份與跨裝置同步
- 檔案自動以日期命名

#### 顯示選項
- 可開關倒數時間顯示
- 可開關 Badge 顯示
- 支援純訊號燈模式

### 🎨 使用者介面
- 現代化紫色漸層設計
- 完整繁體中文介面
- 響應式佈局適應不同螢幕
- 按鈕 hover 效果和視覺動畫
- 操作後即時狀態回饋
- 直覺的操作流程

### 🛠️ 技術實作
- 使用 Chrome Extension Manifest V3
- Chrome Storage API 儲存設定
- Background Service Worker 處理 Badge
- Content Scripts 注入網頁計時器
- Context Menus API 提供右鍵選單
- Notifications API 顯示系統通知

### 📋 權限說明
- `storage`: 儲存使用者設定和規則
- `alarms`: 計時器功能
- `contextMenus`: 右鍵選單功能
- `activeTab`: 取得當前分頁資訊
- `notifications`: 顯示系統通知

### 📝 檔案結構
```
countdown/
├── manifest.json       # 擴充功能配置檔
├── background.js       # 背景服務
├── popup.html          # 主介面 HTML
├── popup.js            # 主介面邏輯
├── site-rules.html     # 規則管理頁面
├── site-rules.js       # 規則管理邏輯
├── content.js          # 內容腳本
├── content.css         # 內容腳本樣式
├── icons/              # 圖示檔案
├── README.md           # 專案說明
├── CHANGELOG.md        # 更新日誌（本檔案）
└── LICENSE.txt         # 授權條款
```

### 🎯 適用場景
- 時間管理與自我控制
- 專注學習與工作
- 限制社群媒體使用時間
- 定時休息提醒
- 培養良好網路使用習慣

---

## 未來計劃

以下功能正在考慮中，可能在未來版本實作：

- 🔊 音效提醒
- ⏸️ 暫停/繼續功能
- 🎨 自訂顏色主題
- 📊 使用統計與歷史記錄
- 🏷️ 預設時間模板
- 🔁 多個計時器同時運行
- 🌙 深色模式

---

**版本命名規則**: 主版本.次版本.修訂版本 (MAJOR.MINOR.PATCH)
- **主版本**：不相容的 API 變更
- **次版本**：向下相容的新功能
- **修訂版本**：向下相容的問題修正
