# 語言切換功能使用指南

## 🌐 功能特色

此倒數計時器擴充功能現在支援 **5 種語言**，並提供兩種方式來設定您喜好的語言：

### 方式 1：自動偵測（推薦）
擴充功能會自動偵測您的瀏覽器語言設定，並顯示對應的介面語言。

### 方式 2：手動切換
在規則管理頁面，您可以手動選擇想要的介面語言。

---

## 📱 支援的語言

| 旗幟 | 語言 | 語言代碼 | 狀態 |
|------|------|----------|------|
| 🇺🇸 | English | en | ✅ 預設 |
| 🇹🇼 | 繁體中文 | zh_TW | ✅ 完整 |
| 🇯🇵 | 日本語 | ja | ✅ 完整 |
| 🇫🇷 | Français | fr | ✅ 完整 |
| 🇪🇸 | Español | es | ✅ 完整 |

---

## 🎯 語言選擇規則

系統會按照以下優先順序決定顯示哪種語言：

```
1️⃣ 使用者手動設定的語言（最高優先）
    ↓ 如果沒有
2️⃣ 瀏覽器語言設定
    ↓ 如果不支援
3️⃣ 預設英文
```

### 範例說明

#### 情境 A：首次使用
```
您的瀏覽器語言：繁體中文 (zh-TW)
→ 介面自動顯示：繁體中文 ✅
```

#### 情境 B：手動切換後
```
您在規則管理頁面選擇：日本語
→ 儲存設定
→ 所有頁面都顯示：日本語 ✅
（即使瀏覽器是繁體中文）
```

#### 情境 C：不支援的語言
```
您的瀏覽器語言：德文 (de)
→ 系統沒有德文翻譯
→ 顯示預設語言：English ✅
```

---

## 🔧 如何切換語言

### 步驟 1：開啟規則管理頁面
點擊擴充功能圖示，然後點擊「管理網站規則」按鈕

### 步驟 2：找到語言設定
捲動到頁面最下方，您會看到「🌐 語言設定」區塊

### 步驟 3：選擇語言
從下拉選單中選擇您想要的語言：
- English
- 繁體中文
- 日本語
- Français
- Español

### 步驟 4：自動套用
選擇後，頁面會自動重新載入並套用新語言

### 步驟 5：確認變更
重新開啟擴充功能 popup，確認所有介面都已切換到新語言

---

## 💡 常見問題

### Q1: 為什麼切換語言後需要重新載入？
**A:** 為了確保所有介面元素都正確更新為新語言，系統需要重新載入頁面。這只需要幾秒鐘。

### Q2: 切換語言後，popup 也會改變嗎？
**A:** 是的！一旦您手動設定語言，**所有頁面**（包括 popup、規則管理頁面）都會使用您選擇的語言。

### Q3: 如何恢復自動偵測？
**A:** 目前需要手動選擇與您瀏覽器語言相同的選項。未來版本可能會加入「自動偵測」選項。

### Q4: 我的語言沒有被支援怎麼辦？
**A:** 目前支援 5 種語言。如果您的語言未被支援，系統會顯示英文介面。我們歡迎社群貢獻翻譯！

### Q5: 翻譯可以改進嗎？
**A:** 當然可以！如果您發現任何翻譯錯誤或有更好的翻譯建議，歡迎提出反饋。

---

## 🛠️ 技術細節

### 儲存機制
語言設定儲存在 Chrome 的 `chrome.storage.local` 中，鍵名為 `userLocale`。

### 重新載入機制
```javascript
languageSelect.addEventListener('change', (e) => {
  const newLocale = e.target.value;
  I18N.setUserLocale(newLocale, () => {
    window.location.reload(); // 重新載入頁面
  });
});
```

### 自動偵測邏輯
```javascript
const browserLocale = chrome.i18n.getUILanguage();
// 對應關係：
// zh-TW, zh-HK → zh_TW
// ja → ja
// fr → fr
// es → es
// 其他 → en (預設)
```

---

## 🎨 介面預覽

### 語言設定區塊
```
┌─────────────────────────────────┐
│  🌐 語言設定                     │
├─────────────────────────────────┤
│  語言                            │
│  ┌───────────────────────────┐  │
│  │ English              ▼   │  │
│  ├───────────────────────────┤  │
│  │ English                   │  │
│  │ 繁體中文                  │  │
│  │ 日本語                    │  │
│  │ Français                  │  │
│  │ Español                   │  │
│  └───────────────────────────┘  │
│                                  │
│  選擇介面語言（需重新載入頁面）│
└─────────────────────────────────┘
```

---

## 🌟 功能優勢

✅ **簡單易用** - 只需點選下拉選單
✅ **即時生效** - 選擇後自動重新載入
✅ **持久儲存** - 設定會被記住
✅ **全域套用** - 所有頁面都會更新
✅ **自動備份** - 匯出設定時會包含語言偏好

---

## 🚀 未來規劃

- [ ] 新增「自動偵測」選項
- [ ] 支援更多語言（德文、韓文等）
- [ ] 在 popup 也加入語言切換器
- [ ] 支援即時切換（無需重新載入）
- [ ] 社群翻譯貢獻系統

---

## 📞 需要幫助？

如有任何問題或建議，歡迎：
1. 查看 `I18N_README.md` 瞭解更多技術細節
2. 查看 `UPDATE_SUMMARY.md` 瞭解最新更新內容
3. 提交 Issue 或 Pull Request

---

**享受您的多語言倒數計時體驗！** 🎉
